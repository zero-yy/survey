<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script src="https://cdn.bootcss.com/html2canvas/0.5.0-beta4/html2canvas.js"></script>
{{/*    <script src="http://html2canvas.hertzen.com/dist/html2canvas.min.js" type="text/javascript" charset="utf-8" async defer></script>*/}}
{{/*    <script src="js/canvas2image.js" type="text/javascript" charset="utf-8" async defer></script>*/}}

    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>您的报告({{ .name }})</title>

    <style type="text/css">
        pre{
        white-space: pre-wrap; /* css-3 */
        white-space: -moz-pre-wrap; /* Mozilla, since 1999 */
        white-space: -pre-wrap; /* Opera 4-6 */
        white-space: -o-pre-wrap; /* Opera 7 */
        word-wrap: break-word; /* Internet Explorer 5.5+ */
        }
    </style>

    <script type="text/javascript">
        $(function(){
            $("#btnPrint").click(function(){
                $("#btnPrint").hide()

                console.log("call btnPrint")

                html2canvas(document.body).then(function(canvas) {
                    // document.body.appendChild(canvas);
                    var imgUri = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"); // 获取生成的图片的url
                    window.location.href= imgUri; // 下载图片
                    console.log(imgUri)
                });

                // html2canvas($(".container")).then(function(canvas) {
                //     // document.body.appendChild(canvas);
                //     var imgUri = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"); // 获取生成的图片的url
                //     window.location.href= imgUri; // 下载图片
                //     console.log(imgUri)
                // });
            });
        });
    </script>

</head>

<body>
<div class="container">
    <div class="row clearfix">
        <div class="col-md-12 column">
            <div class="printContent">
                <div class="page-header">
                    <h1 style="text-align: center;">
                        您的报告({{ .name }})
                    </h1>
                </div>
                <div class="h4" id="printContent">
                    <div>
                        评价: {{ .des }}<br><br>
                    </div>
                    <div>
                        总分: {{ .score }}<br><br>
                    </div>

                </div>
                <div class="panel-footer">
                    报告分析参考<br><br>
                    <pre>{{ .des_ref }}</pre>
                </div>

            </div>

{{/*            <div>*/}}
{{/*                <button type="submit" class="btn btn-info btn-block" id="btnPrint">Save</button>*/}}
{{/*            </div>*/}}

        </div>
    </div>
</div>

</body>
</html>